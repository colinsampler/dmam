#!/bin/bash

if [[ $# -lt 1 ]]; then
  echo "Provide UUID as first argument and the only argument to remove note"
  exit 1
fi

uuid="$1"

if [[ ! -f "$DMAM_NOTES_PATH/$uuid.txt" ]]; then 
  echo "Note by provided UUID not found."
  exit 1
fi

vim "$DMAM_NOTES_PATH/$uuid.txt"

if [[ ! -s "$DMAM_NOTES_PATH/$uuid.txt" ]]; then
  echo "Empty content saved, removing empty file=[$uuid.txt]"
  rm "$DMAM_NOTES_PATH/$uuid.txt"
  exit 1
fi

echo "Note updated under [$uuid]"
echo "#edatenum=$(date +%Y%m%d%H%M)" >> "$DMAM_NOTES_PATH/$uuid.txt"
echo "Auto tagged with update date"

# TODO: git stuff
